<!DOCTYPE html>
<html>
    <head>
        <title>Dominion Shipyards - Catalog</title>
        <link rel="stylesheet" href="css/shipyard.css">
    </head>
    <body>
        <div id="wrapper">
            <header>
                <h1>Dominion Shipyards</h1>
            </header>
            <nav>
                <a href="index.html">Home</a>
                <span class="spacer"></span>
                <a href="catalog.html">Catalog</a>
                <span class="spacer"></span>
                <a href="cart.html">Cart</a>
            </nav>
            <main>
                <h3>Catalog</h3>
                <table id="catalog">
                </table>
            </main>
            <footer>
                <a href="mailto:kgable@my.wctc.edu">kgable@my.wctc.edu</a>
            </footer>
        </div>

        <script>
            var xmlhttp = new XMLHttpRequest();

            xmlhttp.onreadystatechange = function ()
            {
                if (this.readyState == 4 && this.status == 200)
                {
                    var myObj = JSON.parse(this.responseText);
                    var content = "<tr><th>Name</th><th>Class</th><th>Price</th></tr>";

                    for (var property in myObj)
                    {
                        if (myObj.hasOwnProperty(property))
                        {
                            content += "<tr><td>" + myObj[property].name +
                                "</td><td>" + myObj[property].shipClass +
                                "</td><td>" + myObj[property].basePrice + "</td></tr>";
                        }
                    }

                    document.getElementById("catalog").innerHTML = content;

                    alert(this.responseText);
                }
            };

            xmlhttp.open("GET", "/catalog", true);

            xmlhttp.send();

        </script>
    </body>
</html>